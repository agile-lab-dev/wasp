# This file includes defaults for environment configuration, mostly external services.
wasp {
  environment.prefix = ""
  systempipegraphs.start = false # whether to automatically start system pipegraphs
  systemproducers.start = false # whether to automatically start system producers
  additional-jars-path: "/root/wasp/lib"
  datastore {
    indexed: "solr"
    keyvalue: "hbase"
  }

  mongo {
    address = "mongodb://mongo:27017"
    timeout = ${wasp.services-timeout-millis}
  }

  rest {
    server {
      hostname: "master"
    }
  }

  kafka {
    connections = [{
      protocol = ""
      host = "kafka"
      port = 9092
      timeout = ${wasp.services-timeout-millis}
    }
    ]
    zookeeperConnections = [{
      protocol = ""
      host = "zookeeper"
      port = 2181
      timeout = ${wasp.services-timeout-millis}
    }]
    zkChRoot = ""

  }

  spark-streaming {
    app-name = "WASP-streaming"
    master = {
      protocol = "spark"
      host = "spark-master"
      port = 7077
    }
    driver-cores = 1
    driver-memory = "1G"
    driver-hostname = "consumers-spark"
    driver-bind-address = "0.0.0.0"
    executor-cores = "2"
    executor-memory = "1G"
    executor-instances = "1"
    retained-stages-jobs = 100
    retained-tasks = 5000
    retained-executions = 100
    retained-batches = 100
  }

  spark-batch {
    app-name = "WASP-batch"
    master = {
      protocol = "spark"
      host = "spark-master"
      port = 7077
    }
    driver-cores = 1
    driver-memory = "1G"
    driver-hostname = "consumers-spark"
    driver-bind-address = "0.0.0.0"
    executor-cores = "2"
    executor-memory = "1G"
    executor-instances = "1"
    retained-stages-jobs = 100
    retained-tasks = 5000
    retained-executions = 100
    retained-batches = 100
  }

  elastic {
    connections = [
      {
        protocol = ""
        host = "elasticsearch"
        port = 9300
        timeout = ${wasp.services-timeout-millis},
        metadata: [
          {"connectiontype": "binary"}
        ]
      },
      {
        protocol = ""
        host = "elasticsearch"
        port = 9200
        timeout = ${wasp.services-timeout-millis},
        metadata: [
          {"connectiontype": "rest"}
        ]
      }
    ]
    cluster-name = "elasticsearch"
  }

  solrcloud {
    zookeeperConnections: [
      {
        protocol: "",
        host: "zookeeper",
        port: 2181,
        metadata: [
          {"zookeeperRootNode": "/solr"}
        ]
      }
    ],
    name: "Solr",
    cluster_name: "wasp",
    apiEndPoint: {
      protocol: "http",
      host: "solr",
      port: 8983,
      metadata: [
        {"zookeeperRootNode": "/solr"}
      ]
    }
    zkChRoot = "/solr"

  }

  hbase {
    core-site-xml-path: "/etc/hbase/conf/core-site.xml"
    hbase-site-xml-path: "/etc/hbase/conf/hbase-site.xml"
  }

  # No longer required
  # Remember to add in vertical solutions "consumers-spark/build.sbt":
  #   scriptClasspath += ":$HADOOP_CONF_DIR:$YARN_CONF_DIR"
//  hdfs {
//    configurationsResources: [
//      "/etc/hadoop/conf/core-site.xml",
//      "/etc/hadoop/conf/hdfs-site.xml",
//    ]
//  }

  akka {
    loglevel = "DEBUG"
    cluster {
      log-info = on
      seed-nodes = ["akka.tcp://WASP@master:2892"]
    }
  }
}